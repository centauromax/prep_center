server {
    listen 8080;
    server_name localhost;
    
    # Comprimi le risposte
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    
    # Servi file statici dalla cartella build
    location / {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Gestisci le rotte di picture_check con l'app React
    location ~ ^/(picture_check|en/picture_check|it/picture_check)/ {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Mostra una pagina temporanea per le richieste a fbasaving
    location ~ ^/(fbasaving|en/fbasaving|it/fbasaving)/ {
        root /app/build;
        add_header Content-Type "text/html; charset=utf-8";
        return 200 '
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>FBA Saving - Servizio in manutenzione</title>
            <style>
                body { font-family: Arial, sans-serif; text-align: center; margin: 0; padding: 0; }
                .container { max-width: 800px; margin: 50px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
                h1 { color: #2c3e50; }
                .warning { color: #e74c3c; font-size: 18px; margin-bottom: 20px; }
                .btn { display: inline-block; padding: 10px 20px; background-color: #3498db; color: white; text-decoration: none; border-radius: 4px; margin-top: 20px; }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>FBA Saving</h1>
                <p class="warning">Il servizio FBA Saving è temporaneamente in manutenzione.</p>
                <p>Ci scusiamo per l\'inconveniente. I nostri tecnici stanno lavorando per ripristinare il servizio.</p>
                <p>In questo momento il sistema non è in grado di accedere al backend di FBA Saving.</p>
                <a href="/picture_check/" class="btn">Vai a Picture Check</a>
            </div>
        </body>
        </html>';
    }
} 