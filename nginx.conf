server {
    listen 8080;
    server_name localhost;
    
    # Comprimi le risposte
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    
    # Servi file statici dalla cartella build
    location / {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Gestisci le rotte di picture_check con l'app React
    location ~ ^/(picture_check|en/picture_check|it/picture_check)/ {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Gestisci FBASaving con una pagina temporanea 
    location ~ ^/(fbasaving|en/fbasaving|it/fbasaving)/ {
        # Invece di fare proxy, mostriamo una pagina HTML embedded
        add_header Content-Type "text/html; charset=utf-8";
        return 200 '
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>FBA Saving</title>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    text-align: center;
                    margin: 0;
                    padding: 0;
                    background-color: #f5f5f5;
                }
                .container {
                    max-width: 800px;
                    margin: 50px auto;
                    padding: 30px;
                    background-color: white;
                    border-radius: 8px;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                h1 {
                    color: #2c3e50;
                    margin-bottom: 30px;
                }
                .section {
                    margin-bottom: 30px;
                    padding: 20px;
                    border-radius: 5px;
                    background-color: #f8f9fa;
                }
                .btn {
                    display: inline-block;
                    padding: 12px 24px;
                    background-color: #3498db;
                    color: white;
                    text-decoration: none;
                    border-radius: 4px;
                    font-weight: bold;
                    margin: 10px;
                    transition: background-color 0.3s;
                }
                .btn:hover {
                    background-color: #2980b9;
                }
                .btn-success {
                    background-color: #2ecc71;
                }
                .btn-success:hover {
                    background-color: #27ae60;
                }
                p {
                    line-height: 1.6;
                    color: #444;
                }
            </style>
        </head>
        <body>
            <div class="container">
                <h1>FBA Saving</h1>
                
                <div class="section">
                    <h2>Carica il tuo file Excel</h2>
                    <p>Carica un file Excel per calcolare il tuo risparmio FBA.</p>
                    <p>La funzionalità completa sarà disponibile a breve.</p>
                </div>
                
                <div class="section">
                    <h2>Contattaci</h2>
                    <p>Hai domande sul servizio FBA Saving?</p>
                    <p>Contattaci per ulteriori informazioni.</p>
                </div>
                
                <div>
                    <a href="/picture_check/" class="btn">Vai a Picture Check</a>
                </div>
            </div>
        </body>
        </html>';
    }
    
    # Blocco di fallback rimosso perché non più necessario
} 