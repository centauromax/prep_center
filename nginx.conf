server {
    listen 8080;
    server_name localhost;
    
    # Comprimi le risposte
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
    
    # Servi file statici dalla cartella build
    location / {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Gestisci le rotte di picture_check con l'app React
    location ~ ^/(picture_check|en/picture_check|it/picture_check)/ {
        root /app/build;
        try_files $uri $uri/ /index.html;
    }
    
    # Servi direttamente il file HTML statico per fbasaving
    location = /fbasaving/ {
        root /app/build;
        try_files /fbasaving.html =404;
    }
    
    location = /en/fbasaving/ {
        root /app/build;
        try_files /fbasaving.html =404;
    }
    
    location = /it/fbasaving/ {
        root /app/build;
        try_files /fbasaving.html =404;
    }
    
    # Per gli URL pi√π profondi, reindirizza alla root di fbasaving
    location ~ ^/(fbasaving|en/fbasaving|it/fbasaving)/ {
        rewrite ^/(fbasaving|en/fbasaving|it/fbasaving)/(.*)$ /$1/ permanent;
    }
} 