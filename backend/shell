from django.contrib.auth.models import Group, Permission
from django.contrib.contenttypes.models import ContentType
from yourapp.models import ReturnItem  # Importa i tuoi modelli

# Crea i gruppi
admin_group, created = Group.objects.get_or_create(name='Admin')
prep_center_group, created = Group.objects.get_or_create(name='PrepCenter')
client_group, created = Group.objects.get_or_create(name='Client')

# Assegna permessi al gruppo Admin (tutti i permessi)
admin_group.permissions.set(Permission.objects.all())

# Assegna permessi per PrepCenter (modifica e gestione completa dei dati)
returnitem_ct = ContentType.objects.get_for_model(ReturnItem)
prep_center_permissions = Permission.objects.filter(content_type=returnitem_ct)
prep_center_group.permissions.set(prep_center_permissions)

# Assegna permessi per Client (solo modifica di alcuni campi)
limited_permissions = Permission.objects.filter(content_type=returnitem_ct, codename__in=['change_returnitem'])
client_group.permissions.set(limited_permissions)

